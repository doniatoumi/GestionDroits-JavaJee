<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<title>Profiles List</title>
</h:head>
<h:body>

	<!-- <h:form> -->
	<!--     <p:dataTable id="tableProfil" var="profil" value="#{listeProfilsBean.findAll()}"> -->
	<!--         <c:facet name="header"> -->
	<!--             Expand rows to see detailed information -->
	<!--         </c:facet> -->
	<!--         <p:column style="width:16px"> -->
	<!--             <p:rowToggler /> -->
	<!--         </p:column> -->
	<!--         <p:column headerText="Id"> -->
	<!--             <h:outputText value="#{profil.id}" /> -->
	<!--         </p:column> -->
	<!--         <p:column headerText="Profil Name"> -->
	<!--             <h:outputText value="#{profil.name}" /> -->
	<!--         </p:column> -->

	<!--         <p:column style="width:32px" > -->
	<!--            <p:rowEditor /> -->





	<!--  <h:commandButton id="updateBtn" action="updateProfil" value="Update" > -->
	<!-- 						<c:setPropertyActionListener target="#{listeProfilsBean.profil}" -->
	<!-- 						value="#{profil}" /> -->
	<!-- 					</h:commandButton> -->


	<!--     <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" /> -->


	<!--     <p:growl id="message" showDetail="true" /> -->

	<!--     <p:commandButton value="Delete" actionListener="#{listeProfilsBean.delete(profil)}" update="message" modal="true" icon="ui-icon-trash"> -->
	<!--         <p:confirm header="Confirmation" message="Are you sure?" icon="ui-icon-alert" update="tableProfil" ajax="false"/> -->
	<!--     <c:ajax render="@all" /> -->
	<!--     </p:commandButton> -->


	<!--     <p:confirmDialog global="true" showEffect="fade" hideEffect="fade"> -->
	<!--         <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" /> -->
	<!--         <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" /> -->
	<!--     </p:confirmDialog> -->

	<!--         </p:column> -->

	<!--         <p:rowExpansion> -->
	<!--             <p:panelGrid  columns="2" columnClasses="label,value" style="width:100%"> -->
	<!--                 <c:facet name="header"> -->
	<!--                     <p:graphicImage value="Administrateur.png" style="width:100%;height:25%"/>  -->
	<!--                 </c:facet> -->

	<!--                 <h:outputText value="Id:" /> -->
	<!--                 <h:outputText value="#{profil.id}" /> -->

	<!--                 <h:outputText value="Profil Name:" /> -->
	<!--                 <h:outputText value="#{profil.name}" /> -->

	<!--                 <h:outputText value="Description:" /> -->
	<!--                 <h:outputText value="#{profil.description}" style="color:#{car.color}"/> -->


	<!--             </p:panelGrid> -->
	<!--         </p:rowExpansion> -->

	<!--     </p:dataTable> -->
	<!-- </h:form> -->




	<!-- ////////////////////////////////////////////////////////////////////////// -->

	<h:form id="form">
		<p:growl id="msgs" showDetail="true" />
		<p:panel id="pnl" header="View Profil" style="margin-bottom:10px;">

			<h:panelGrid columns="1" cellpadding="50">
				<h:column>
					<p:dataTable id="profilTable" var="profil"
						value="#{listeProfilsBean.findAll()}" editable="true"
						style="margin-bottom:20px">
						<c:facet name="header">

						</c:facet>



						<p:column style="width:2%">
							<p:rowToggler />

						</p:column>
						<p:ajax event="rowEdit" listener="#{listeProfilsBean.onRowEdit}"
							update=":form:msgs" />
						<p:ajax event="rowEditCancel"
							listener="#{listeProfilsBean.onRowCancel}" update=":form:msgs" />

						<p:column headerText="Id" style="width:5%">
							<p:cellEditor id="ceId">
								<c:facet name="output">
									<h:outputText value="#{profil.id}" />
								</c:facet>
								<c:facet name="input">
									<p:inputText id="modelInput"
										value="#{listeProfilsBean.profilId}" style="width:100%"
										ajax="false" update=":form:profilTable" />

								</c:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Name" style="width:10%">
							<p:cellEditor>
								<c:facet name="output">
									<h:outputText value="#{profil.name}" />
								</c:facet>
								<c:facet name="input">
									<p:inputText value="#{profil.name}" style="width:100%"
										label="profil.name" />
								</c:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Description" style="width:20%">
							<p:cellEditor>
								<c:facet name="output">
									<h:outputText value="#{profil.description}" />
								</c:facet>
								<c:facet name="input">
									<p:inputText value="#{profil.description}" style="width:100%"
										label="profil.name" />
								</c:facet>
							</p:cellEditor>
						</p:column>




						<p:growl id="message" showDetail="true" />
						<p:commandButton
							actionListener="#{listeProfilsBean.update(profil)}"
							icon="ui-icon-trash">
							<c:ajax render="@all" />
						</p:commandButton>


						<p:commandButton
							actionListener="#{listeProfilsBean.delete(profil)}"
							update="message" modal="true" icon="ui-icon-disk">
							<p:confirm header="Confirmation" message="Are you sure?"
								icon="ui-icon-alert" update="tableProfil" ajax="false" />
							<c:ajax render="@all" />
						</p:commandButton>


						<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
							<p:commandButton value="Yes" type="button"
								styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
							<p:commandButton value="No" type="button"
								styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
						</p:confirmDialog>

						<p:rowExpansion>
							<p:panelGrid columns="1" columnClasses="label,value"
								style="width:100%">
								<c:facet name="header">
									<p:graphicImage value="Administrateur.png"
										style="width:100%;height:25%" />
								</c:facet>
							</p:panelGrid>
								<h:panelGrid columns="2" cellpadding="5">
									<h:column style="width:60%">

										<p:dataTable id="users" var="user"
											value="#{listeProfilsBean.findAllUser(profil)}">
											<p:column headerText="Id">
												<h:outputText value="#{user.serialNbr}" />
											</p:column>

											<p:column headerText="Nom">
												<h:outputText value="#{user.lastName}" />
											</p:column>

											<p:column headerText="Prenom">
												<h:outputText value="#{user.firstName}" />
											</p:column>

											<p:column headerText="Commentaire">
												<h:outputText value="#{user.comment}" />
											</p:column>
										</p:dataTable>

									</h:column>
									<h:column style="width:40%">

										<p:dataTable id="droits" var="droit"
											value="#{listeProfilsBean.findAllDroit(profil)}">
											<p:column headerText="Id">
												<h:outputText value="#{droit.key}" />
											</p:column>

											<p:column headerText="Nom">
												<h:outputText value="#{droit.labell}" />
											</p:column>
										</p:dataTable>

									</h:column>
									<!--         <p:commandLink value="Submit" update="display" /> -->
								</h:panelGrid>
						</p:rowExpansion>

					</p:dataTable>



				</h:column>
			</h:panelGrid>
		</p:panel>


		<!--             <p:commandButton value="Ajouter"  actionListener="#{listeProfilsBean.ajouter(profil)}" icon="ui-icon-disk"> -->
		<!--     <c:ajax render="@all" /> -->
		<!--     </p:commandButton>     -->


	</h:form>

</h:body>
</html>